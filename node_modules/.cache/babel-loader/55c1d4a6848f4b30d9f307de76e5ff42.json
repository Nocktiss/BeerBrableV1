{"ast":null,"code":"var _jsxFileName = \"/home/nocktis/Documents/Stage_Brable_Propre/Brabletest/src/components/Payments/PaymentFormComponent.js\";\nimport React, { Component } from 'react';\nimport { CardNumberElement, CardExpiryElement, CardCVCElement, injectStripe } from 'react-stripe-elements';\nimport queryString from 'query-string';\nimport Alert from '../../Alert';\nimport { Card, CardTitle, Container, CardText } from 'reactstrap';\nimport './Payment.scss';\nimport ClienInfo from '../Clients/ClientInfo';\n\nclass _Form extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      alertMessage: '',\n      alertStyle: ''\n    };\n  }\n\n  handleSubmit(ev) {\n    ev.preventDefault();\n    this.props.stripe.createToken({\n      name: this.props.clientName\n    }).then(result => {\n      if (typeof result.error !== 'undefined') {\n        this.setState({\n          error: result.error.message,\n          success: ''\n        });\n      } else {\n        this.stripeCreateCharge(result.token, this.props.totalPrice);\n      }\n    });\n  }\n\n  stripeCreateCharge(token, amount) {\n    const params = {\n      token: token.id,\n      amount: amount\n    };\n    const qParams = queryString.stringify(params);\n    const url = ['/api', qParams].join('?');\n    fetch(url).then(response => response.json()).then(val => {\n      if (val.ok) {\n        return val.message;\n      } else {\n        throw val.message;\n      }\n    }).then(success => this.setState({\n      alertMessage: success,\n      alertStyle: 'success'\n    })).catch(error => this.setState({\n      alertMessage: error,\n      alertStyle: 'danger'\n    }));\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(Container, {\n      onSubmit: ev => this.handleSubmit(ev),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(CardTitle, {\n      className: \"cardTitlePaymentFormComponent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, \"Entre ton moyen de paiement\"), React.createElement(Card, {\n      className: \"CardPaymenntFormComponenentCard\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(Alert, {\n      msg: this.state.alertMessage,\n      style: this.state.alertStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col12PaymentFormComponent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col8PaymentFormComponent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(CardText, {\n      className: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"Num\\xE9ro de Carte\"), React.createElement(CardNumberElement, {\n      className: \"cardNumberElementPaymentFormComponent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col4PaymentFormComponent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(CardText, {\n      className: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \" Expiration\"), React.createElement(CardExpiryElement, {\n      className: \"cardExpiryElementPaymentFormComponent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"col12PaymentFormComponent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col8PaymentFormComponent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(ClienInfo, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col4PaymentFormComponent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(CardText, {\n      className: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"Cryptogramme\"), React.createElement(CardCVCElement, {\n      className: \"cardCVCElementPaymentFormComponent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"buttonPayPaymentFormComponenent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"Pay!\"))))));\n  }\n\n}\n\nexport default injectStripe(_Form);","map":{"version":3,"sources":["/home/nocktis/Documents/Stage_Brable_Propre/Brabletest/src/components/Payments/PaymentFormComponent.js"],"names":["React","Component","CardNumberElement","CardExpiryElement","CardCVCElement","injectStripe","queryString","Alert","Card","CardTitle","Container","CardText","ClienInfo","_Form","constructor","props","state","alertMessage","alertStyle","handleSubmit","ev","preventDefault","stripe","createToken","name","clientName","then","result","error","setState","message","success","stripeCreateCharge","token","totalPrice","amount","params","id","qParams","stringify","url","join","fetch","response","json","val","ok","catch","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {\n  CardNumberElement,\n  CardExpiryElement,\n  CardCVCElement,\n  injectStripe\n} from 'react-stripe-elements';\nimport queryString from 'query-string';\nimport Alert from '../../Alert';\nimport { Card, CardTitle, Container, CardText } from 'reactstrap';\nimport './Payment.scss'\nimport ClienInfo from '../Clients/ClientInfo'\n\nclass _Form extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      alertMessage: '',\n      alertStyle: ''\n    };\n  }\n\n  handleSubmit(ev) {\n    ev.preventDefault();\n\n    this.props.stripe.createToken({ name:this.props.clientName })\n      .then(result => {\n        if (typeof (result.error) !== 'undefined') {\n          this.setState({ error: result.error.message, success: '' });\n        } else {\n          this.stripeCreateCharge(result.token, this.props.totalPrice);\n        }\n      });\n  } \n\n  stripeCreateCharge(token, amount) {\n    const params = { token: token.id, amount: amount };\n    const qParams = queryString.stringify(params);\n    const url = ['/api', qParams].join('?');\n\n    fetch(url)\n      .then(response => response.json())\n      .then(val => {\n        if (val.ok) {\n          return val.message;\n        } else {\n          throw val.message;\n        }\n      })\n      .then(success => this.setState({ alertMessage: success, alertStyle: 'success' }))\n      .catch(error => this.setState({ alertMessage: error, alertStyle: 'danger' }));\n  }\n\n  render() {\n    return (\n      <div>\n        <Container onSubmit={(ev) => this.handleSubmit(ev)}>\n          <CardTitle className='cardTitlePaymentFormComponent'>Entre ton moyen de paiement</CardTitle>\n\n          <Card className=\"CardPaymenntFormComponenentCard\">\n            <form >\n\n              <Alert msg={this.state.alertMessage} style={this.state.alertStyle} />\n\n              <div className=\"col12PaymentFormComponent\">\n                <div className=\"col8PaymentFormComponent\">\n                <CardText className=''>Numéro de Carte</CardText>\n                <CardNumberElement className=\"cardNumberElementPaymentFormComponent\" />\n                </div>\n\n                <div className=\"col4PaymentFormComponent\">\n                <CardText className=''> Expiration</CardText>\n                <CardExpiryElement className=\"cardExpiryElementPaymentFormComponent\" />\n                </div>\n              </div>\n              <div className=\"col12PaymentFormComponent\">\n                <div className=\"col8PaymentFormComponent\">\n\n                <ClienInfo />\n                \n                </div>\n\n                <div className=\"col4PaymentFormComponent\">\n\n                <CardText className=''>Cryptogramme</CardText>\n                <CardCVCElement className=\"cardCVCElementPaymentFormComponent\" />\n                </div>\n              </div>\n\n              {/* <div className=\"col12PaymentFormComponent\">\n              <div className=\"col8PaymentFormComponent\">   \n                <ClienInfo />\n                </div>\n                <div className=\"col4PaymentFormComponent\">\n                  <CardText className=''>Cryptogramme</CardText>\n                    <CardCVCElement className=\"cardCVCElementPaymentFormComponent\" />\n                </div>\n              </div> */}\n<div className=\"buttonPayPaymentFormComponenent\"> \n              <button type=\"submit\" className=\"btn btn-primary\">Pay!</button>\n              </div>\n            </form>\n          </Card>\n        </Container>\n      </div>\n    );\n  }\n\n\n}\n\n\n\nexport default  injectStripe (_Form)\n\n\n\n"]},"metadata":{},"sourceType":"module"}